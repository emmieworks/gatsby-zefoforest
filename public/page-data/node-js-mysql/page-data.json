{"componentChunkName":"component---src-templates-post-js","path":"/node-js-mysql/","result":{"data":{"site":{"siteMetadata":{"title":"Zero Forest"}},"markdownRemark":{"id":"d44ea259-69db-5156-a7fc-15c8f7629a26","excerpt":"Node.jsの学びメモ。\nNode.jsとMySQLを接続して、データベースを動かす方法を説明します。 MacでのMySQLの導入方法 Node.js(Express)からMySQLデータベースに接続するプログラム データベースから情報を取得して、表示するプログラム 前提 Macでの操作になります Node.js…","tableOfContents":"<ul>\n<li><a href=\"/node-js-mysql/#nodejs%E7%94%A8%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90\">Node.js用のプロジェクトの作成</a></li>\n<li>\n<p><a href=\"/node-js-mysql/#mysql%E3%83%87%E3%83%BC%E3%82%BF%E3%83%BC%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90\">MySQLデーターベースの作成</a></p>\n<ul>\n<li><a href=\"/node-js-mysql/#nodejs%E3%81%A7mysql%E3%81%B8%E6%8E%A5%E7%B6%9A%E3%81%99%E3%82%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0\">Node.jsでMySQLへ接続するプログラム</a></li>\n<li><a href=\"/node-js-mysql/#mysql%E3%81%AB%E6%8E%A5%E7%B6%9A%E3%81%A7%E3%81%8D%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B%E3%80%81%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%97%E3%81%A6%E7%A2%BA%E8%AA%8D\">MySQLに接続できているか、プログラムを実行して確認</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/node-js-mysql/#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AE%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%97%E3%81%A6%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8Bnodejs%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0\">データベースの情報を取得して表示するNode.jsプログラム</a></p>\n<ul>\n<li><a href=\"/node-js-mysql/#nodejs%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AE%E5%AE%9F%E8%A1%8C%E7%B5%90%E6%9E%9C\">Node.jsプログラムの実行結果</a></li>\n</ul>\n</li>\n</ul>","html":"<p>Node.jsの学びメモ。\nNode.jsとMySQLを接続して、データベースを動かす方法を説明します。</p>\n<ul>\n<li>MacでのMySQLの導入方法</li>\n<li>Node.js(Express)からMySQLデータベースに接続するプログラム</li>\n<li>データベースから情報を取得して、表示するプログラム</li>\n</ul>\n<p>前提</p>\n<ul>\n<li>Macでの操作になります</li>\n<li>Node.jsはインストール済み</li>\n</ul>\n<h2 id=\"nodejs用のプロジェクトの作成\" style=\"position:relative;\">Node.js用のプロジェクトの作成</h2>\n<p>新しいフォルダを作成し、フォルダの中で、下記コマンドを順に実行します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$npm init</code></pre></div>\n<p>設定はデフォルトのままで、entry point : (index.js)のところは、「app.js」にしました。（初期ファイルがapp.jsになります。）</p>\n<p>Expressインストール</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$npm install express --save</code></pre></div>\n<p>EJSのインストール\nejsを導入することで、HTMLにJavaScriptを埋め込めるようになります。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$npm install ejs</code></pre></div>\n<p>MySQLのインストール</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ npm install mySQL</code></pre></div>\n<h2 id=\"mysqlデーターベースの作成\" style=\"position:relative;\">MySQLデーターベースの作成</h2>\n<p>MySQLをインストールしていない場合はまずインストールします。\nbrew install mysql</p>\n<p>MySQLサーバーを立ち上げます。</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- MySQLサーバースタート</span>\nmysql<span class=\"token punctuation\">.</span>server <span class=\"token keyword\">start</span></code></pre></div>\n<p>コンソールがmysql>となり、MySQLを操作できるようになります。</p>\n<p>MySQLへログインします。</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- MySQLへログイン</span>\nmysql <span class=\"token operator\">-</span>uroot <span class=\"token operator\">-</span>p</code></pre></div>\n<p>ポート番号を確認します。</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- ポート番号の確認</span>\n<span class=\"token keyword\">show</span> variables <span class=\"token operator\">like</span> <span class=\"token string\">'port'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------+</span>\n<span class=\"token operator\">|</span> Variable_name <span class=\"token operator\">|</span> <span class=\"token keyword\">Value</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------+</span>\n<span class=\"token operator\">|</span> port          <span class=\"token operator\">|</span> <span class=\"token number\">3306</span>  <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------+</span></code></pre></div>\n<p>ここで出てきた、3306はあとでプログラムを書く時に、ポート番号として使います。</p>\n<p>まずはプログラムで使う、データベースとテーブルを作成します。\nテスト用のデータベース作成します。</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- データベースtest作成</span>\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">database</span> test<span class=\"token punctuation\">;</span></code></pre></div>\n<p>testにテーブルitemsを作成します。</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- テーブル作成</span>\n<span class=\"token keyword\">use</span> test<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> items<span class=\"token punctuation\">(</span>\n     id <span class=\"token keyword\">INT</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">AUTO_INCREMENT</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n     name <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token punctuation\">,</span>\n     <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>作成したテーブル情報を確認します。</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">DESC</span> items<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">-------+-------------+------+-----+---------+----------------+</span>\n<span class=\"token operator\">|</span> Field <span class=\"token operator\">|</span> <span class=\"token keyword\">Type</span>        <span class=\"token operator\">|</span> <span class=\"token boolean\">Null</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">Key</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">Default</span> <span class=\"token operator\">|</span> Extra          <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">-------+-------------+------+-----+---------+----------------+</span>\n<span class=\"token operator\">|</span> id    <span class=\"token operator\">|</span> <span class=\"token keyword\">int</span>         <span class=\"token operator\">|</span> <span class=\"token keyword\">NO</span>   <span class=\"token operator\">|</span> PRI <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>    <span class=\"token operator\">|</span> <span class=\"token keyword\">auto_increment</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> name  <span class=\"token operator\">|</span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">NO</span>   <span class=\"token operator\">|</span>     <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>    <span class=\"token operator\">|</span>                <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">-------+-------------+------+-----+---------+----------------+</span></code></pre></div>\n<p>テーブルにデータを投入します。</p>\n<p>これで、こんなテーブル(items)ができています。</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- データ投入</span>\n<span class=\"token keyword\">INSERT</span> items<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'じゃがいも'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">INSERT</span> items<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'にんじん'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">INSERT</span> items<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'たまねぎ'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ユーザーを作り、ユーザー権限を付与します。</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- ユーザー作成、権限付与</span>\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">user</span> <span class=\"token string\">'root'</span><span class=\"token variable\">@'localhost'</span> identified <span class=\"token keyword\">with</span> mysql_native_password <span class=\"token keyword\">by</span> <span class=\"token string\">'password'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">ALL</span> <span class=\"token keyword\">ON</span> test<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">'root'</span><span class=\"token variable\">@'localhost'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>root →ユーザー名\npassword →パスワード\ntest → データベース名\nをいれてください。</p>\n<p> MySQL8.0の場合、Node.jsのmysqlが新しいパスワードの認証形式に対応していないため、ユーザーの設定ができていないと、このような実行エラーがでてしまいます。</p>\n<h3 id=\"nodejsでmysqlへ接続するプログラム\" style=\"position:relative;\">Node.jsでMySQLへ接続するプログラム</h3>\n<p>app.jsに以下のようなコードを書きます。</p>\n<div class=\"gatsby-code-title\">app.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> mysql <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mysql'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">static</span><span class=\"token punctuation\">(</span><span class=\"token string\">'public'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// データベース接続情報</span>\n<span class=\"token keyword\">const</span> connection <span class=\"token operator\">=</span> mysql<span class=\"token punctuation\">.</span><span class=\"token function\">createConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  host<span class=\"token operator\">:</span> <span class=\"token string\">'localhost'</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token number\">3306</span><span class=\"token punctuation\">,</span>\n  user<span class=\"token operator\">:</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">,</span>\n  password<span class=\"token operator\">:</span> <span class=\"token string\">'password'</span><span class=\"token punctuation\">,</span>\n  database<span class=\"token operator\">:</span> <span class=\"token string\">'test'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// データベースに接続できたらコンソールにConnectedを表示</span>\nconnection<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Connected'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>データベース接続情報は各自の環境に変更ください</p>\n<ul>\n<li>port：先ほどMySQLで確認したポート番号3306を設定</li>\n<li>userアカウント名</li>\n<li>password：パスワード</li>\n<li>database:データベース名</li>\n</ul>\n<h3 id=\"mysqlに接続できているか、プログラムを実行して確認\" style=\"position:relative;\">MySQLに接続できているか、プログラムを実行して確認</h3>\n<p>ターミナルでプログラムを実行します。</p>\n<p>うまくいっているとターミナル上に「Connected」と表示されています。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$node app.js</code></pre></div>\n<p>確認できたら、Ctrl + cで終了。</p>\n<h2 id=\"データベースの情報を取得して表示するnodejsプログラム\" style=\"position:relative;\">データベースの情報を取得して表示するNode.jsプログラム</h2>\n<p>続いて、テーブルからデータをSELECTして画面に表示するプログラム</p>\n<p>projectフォルダ構造はこのようになっています。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 796px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABOElEQVQ4y+2SsUrEQBCG82I2op0PYecL+A4KYuEjCDZ2YqlWotjIISFBzXkmwdyZPXdNLoHLbjab3yQYyZ1Rc2Bh4Q8/zM7Mfiyzo00mE7iuC13XQSlFHMcoc2EYfjgIAjDGQAiBaZowDAOe5yGKoqrW7NUeYgV9+IqBZeHZH8O2HbxQhqamCYdSqorTNIUQAnmeo01azCU838fT4x08p4/x0AbxbEwj2miTFWheJXTemjHiOL0Z4eTKwtH5PY4vB7i4DdBzBXoOx7Uj0PdFAZSfIPV55oVbZyHWDxg29hnW9giWd3ys7JLKq4WXtn1sHlJwkc4Av5IGKPwsBSllN2CWKaiiroqmyurddVzUZJZ1B9a/1zbg+mK2CLBsbhtuM7cQsNypXwVyzv+Bf+1Tmnv4HTBJkk7AN+kt394vWDFHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"フォルダ構造\"\n        title=\"フォルダ構造\"\n        src=\"/static/6fd1bded628440a8216503d51ecea210/d48f1/node02-db-select-02.png\"\n        srcset=\"/static/6fd1bded628440a8216503d51ecea210/772e8/node02-db-select-02.png 200w,\n/static/6fd1bded628440a8216503d51ecea210/e17e5/node02-db-select-02.png 400w,\n/static/6fd1bded628440a8216503d51ecea210/d48f1/node02-db-select-02.png 796w\"\n        sizes=\"(max-width: 796px) 100vw, 796px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>まず、app.jsには以下のプログラムを書きます。</p>\n<div class=\"gatsby-code-title\">app.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> mysql <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mysql'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// データベース接続情報</span>\n<span class=\"token keyword\">const</span> connection <span class=\"token operator\">=</span> mysql<span class=\"token punctuation\">.</span><span class=\"token function\">createConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  host<span class=\"token operator\">:</span> <span class=\"token string\">'localhost'</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token number\">3306</span><span class=\"token punctuation\">,</span>\n  user<span class=\"token operator\">:</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">,</span>\n  password<span class=\"token operator\">:</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">,</span>\n  database<span class=\"token operator\">:</span> <span class=\"token string\">'list_app'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// テーブルitemsのデータを取得してindex.ejsで表示</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  connection<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'SELECT * FROM items'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> results</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      res<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token string\">'index.ejs'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span>items<span class=\"token operator\">:</span>results<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>views/index.ejsで表示します。</p>\n<div class=\"gatsby-code-title\">views/index.ejs</div>\n<div class=\"gatsby-highlight\" data-language=\"markup\"><pre class=\"language-markup\"><code class=\"language-markup\"><span class=\"token doctype\">&lt;!DOCTYPE html></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>SAMPLE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span>\n        &lt;% items.forEach((item) => { %>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>&lt;%= item.id %><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>&lt;%= item.name %><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n        &lt;% }) %>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3 id=\"nodejsプログラムの実行結果\" style=\"position:relative;\">Node.jsプログラムの実行結果</h3>\n<p>ターミナルでプログラムを実行します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$node app.js</code></pre></div>\n<p>localhost:3000にアクセスするとデータベースの内容がリストで表示されています。（いろいろ操作してたら、とまととだいこんの行が増えてました😅）</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACHElEQVQ4y62RS28SURSAMSyMiRtdmSjyKk15lecM0+GdFGykpZUaXfiAqD+FFX8AFvwEIEHjQscACW4IC1iQsCYEViQkLHhe7vHMaKGkah96ki/n5sy93z1zroyR3ZX991A8VOu9hp2vDq/um8FmF4LBfcHtCQgOp0vYtTgEq80p2OyMwLB7gt5gFtQanfBIoRJU6i2RL2rN1nfFYxW3EiqV2pDP4QTGYwHeH4RY7AU8OYiAxxsAFMMe7wWUAetyg8lsA5udBRfnBqPJAgbjrlTDS16thBqtLuRgeWK1csTFeRYs5yFGk5XgQcK7fZgZsqM3E6VKSzTabeIP7JO38XckgBmZ8W4/6Lb1ayHDcuHDoxOIHsfgKBqjYhaJHB7D00gU8wnWn2HtVKqfPn8Jr98kRGg88Z4kEh+A571rYS6XC0+nU5hMJjAcDulgMIDxeAyUUlgulxKEkA0WiwXM53M6m80IYJRKpbWwUCiExU0og36/TxHp0BWCItLGSqWyKcTbJGGn06G9Xu/nbuzwEsSQhOVy+ffCbrdLR6PRhvCP7Z0TXuhQ/MVfc6TiLM9ENxLm8/mwOPhzc7lU9lchvnIIX42IH1EsIa6vyOzCDIvF4gH8Y1Sr1fhKmEqlrK1WK99sNj8hH69Do9Eottvtz9ls1ifJ0um0mG4j95AHN+Q+cieZTN4661BWq9XkONhrg7OT1+t1eSaTkWQ/ADOr8kYDU3qTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"実行結果\"\n        title=\"実行結果\"\n        src=\"/static/7455b63146ea4e7635ead2eac40b23c7/5a190/node02-db-select.png\"\n        srcset=\"/static/7455b63146ea4e7635ead2eac40b23c7/772e8/node02-db-select.png 200w,\n/static/7455b63146ea4e7635ead2eac40b23c7/e17e5/node02-db-select.png 400w,\n/static/7455b63146ea4e7635ead2eac40b23c7/5a190/node02-db-select.png 800w,\n/static/7455b63146ea4e7635ead2eac40b23c7/c1b63/node02-db-select.png 1200w,\n/static/7455b63146ea4e7635ead2eac40b23c7/d9b5d/node02-db-select.png 1224w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p> 最後に、MySQLを終了するときは「exit」で。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">exit</code></pre></div>","frontmatter":{"title":"Node.js+ExpressでMySQLに接続して一覧表示する(Mac)","date":"2020/04/25","updateDate":null,"description":null,"category":"Programming","tags":["MySQL","Node.js"],"featured":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABehm4ZCob/8QAGRABAQADAQAAAAAAAAAAAAAAAQACEBIh/9oACAEBAAEFAiyfTpjRf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAQADAAAAAAAAAAAAAAAAAAAgITH/2gAIAQEABj8CU2H/xAAZEAEBAAMBAAAAAAAAAAAAAAABABARMUH/2gAIAQEAAT8hjDFqXpxQehA1y//aAAwDAQACAAMAAAAQjx//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPxBH/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EFEU/8QAGRABAQEBAQEAAAAAAAAAAAAAAREAMVEh/9oACAEBAAE/EALUE8swTUeJhFlGd3wQ4a8qfUMrlv/Z","aspectRatio":1.7699115044247788,"src":"/static/ce2b9bae6798fbc560e696ee15f9a839/14b42/icatch-20200425.jpg","srcSet":"/static/ce2b9bae6798fbc560e696ee15f9a839/f836f/icatch-20200425.jpg 200w,\n/static/ce2b9bae6798fbc560e696ee15f9a839/2244e/icatch-20200425.jpg 400w,\n/static/ce2b9bae6798fbc560e696ee15f9a839/14b42/icatch-20200425.jpg 800w,\n/static/ce2b9bae6798fbc560e696ee15f9a839/a6352/icatch-20200425.jpg 960w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},"pageContext":{"slug":"/node-js-mysql/","prev":{"fields":{"slug":"/start-node-js/"},"frontmatter":{"title":"【はじめてのNode.js】環境構築からプログラムを動かす手順をていねいに解説！"}},"next":{"fields":{"slug":"/jin-syntaxhighlighter/"},"frontmatter":{"title":"【JINカスタマイズ】シンタックスハイライターを改造して、Gutenbergでもソースコードを表示する方法"}}}},"staticQueryHashes":["1941199855","3628787746","4032985131"]}