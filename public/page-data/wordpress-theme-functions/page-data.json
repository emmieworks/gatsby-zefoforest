{"componentChunkName":"component---src-templates-post-js","path":"/wordpress-theme-functions/","result":{"data":{"site":{"siteMetadata":{"title":"Zero Forest"}},"markdownRemark":{"id":"e30306c0-a438-5697-b1b9-c6bcc02ebe74","excerpt":"functions.phpでできること functions.phpには、テーマの中で使う機能やテーマの設定します。 ここに機能をまとめて書いておくことで、同じ処理をつかいまわしたり、ページテンプレートの方のコードをシンプルにできます。\nfunctions.php…","tableOfContents":"<ul>\n<li><a href=\"/wordpress-theme-functions/#functionsphp%E3%81%A7%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%93%E3%81%A8\">functions.phpでできること</a></li>\n<li><a href=\"/wordpress-theme-functions/#css%E3%81%A8javascript%E3%82%92%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%82%80\">CSSとjavascriptを読み込む</a></li>\n<li><a href=\"/wordpress-theme-functions/#%E3%83%86%E3%83%BC%E3%83%9E%E5%86%85%E3%81%A7%E4%BD%BF%E3%81%86css%E3%81%A8javascript%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B\">テーマ内で使うCSSとJavascriptファイルを指定する</a></li>\n<li>\n<p><a href=\"/wordpress-theme-functions/#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%83%98%E3%83%83%E3%83%80%E3%83%BC\">カスタムヘッダー</a></p>\n<ul>\n<li><a href=\"/wordpress-theme-functions/#%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%81%B4%E3%81%A7%E3%83%98%E3%83%83%E3%83%80%E3%83%BC%E7%94%BB%E5%83%8F%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B\">テンプレートファイル側でヘッダー画像を表示する</a></li>\n</ul>\n</li>\n<li><a href=\"/wordpress-theme-functions/#%E3%83%8A%E3%83%93%E3%82%B2%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%A1%E3%83%8B%E3%83%A5%E3%83%BC\">ナビゲーションメニュー</a></li>\n<li><a href=\"/wordpress-theme-functions/#%E3%82%A6%E3%82%A3%E3%82%B8%E3%83%83%E3%83%88%E3%82%A8%E3%83%AA%E3%82%A2\">ウィジットエリア</a></li>\n<li><a href=\"/wordpress-theme-functions/#%E3%82%B5%E3%83%A0%E3%83%8D%E3%82%A4%E3%83%AB%E3%82%92%E6%9C%89%E5%8A%B9%E3%81%AB%E3%81%99%E3%82%8B\">サムネイルを有効にする</a></li>\n<li><a href=\"/wordpress-theme-functions/#%E6%8A%9C%E7%B2%8B%E3%81%AE%E6%96%87%E5%AD%97%E6%95%B0%E3%80%81%E6%96%87%E6%9C%AB%E3%81%AE%E8%A1%A8%E7%A4%BA%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B\">抜粋の文字数、文末の表示を変える</a></li>\n<li><a href=\"/wordpress-theme-functions/#%E3%83%93%E3%82%B8%E3%83%A5%E3%82%A2%E3%83%AB%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF%E3%81%AE%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA\">ビジュアルエディタのカスタマイズ</a></li>\n</ul>","html":"<h2 id=\"functionsphpでできること\" style=\"position:relative;\">functions.phpでできること</h2>\n<p>functions.phpには、テーマの中で使う機能やテーマの設定します。</p>\n<p>ここに機能をまとめて書いておくことで、同じ処理をつかいまわしたり、ページテンプレートの方のコードをシンプルにできます。\nfunctions.phpはとても大事なファイルで、適切にコードが書けていないと、サイトが真っ白になったり、テーマが動作しないので注意してくださいね。</p>\n<h2 id=\"cssとjavascriptを読み込む\" style=\"position:relative;\">CSSとjavascriptを読み込む</h2>\n<p>まず、 <code class=\"language-text\">&lt;/head&gt;</code>の前にwp_head()を書く</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"> <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">wp_head</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>wp_head()を入れることで、メタ情報をWordPressが自動で出力してくれます。</p>\n<p>【余談：wp_headの不要タグ削除】</p>\n<p>wp_head()では余計なコードも勝手に吐き出されてします。</p>\n<p>remove_actionを使って、コードが表示されないように設定できます。</p>\n<div class=\"gatsby-code-title\">functions.php</div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token function\">remove_action</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'wp_head'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'wp_generator'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//WordPressのバージョン情報を非表示</span>\n<span class=\"token function\">remove_action</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'wp_head'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'feed_links_extra'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// RSSフィードを非表示</span>\n<span class=\"token function\">remove_action</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'wp_head'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'rsd_link'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 外部ツールを用いた記事投稿を非表示</span>\n<span class=\"token function\">remove_action</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'wp_head'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'wlwmanifest_link'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Windows Live Writer記事投稿を非表示</span>\n<span class=\"token function\">remove_action</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'wp_head'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'wp_shortlink_wp_head'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// デフォルトパーマリンクを非表示</span>\n<span class=\"token function\">remove_action</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'wp_head'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'adjacent_posts_rel_link_wp_head'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//前記事と後記事を非表示</span>\n<span class=\"token function\">remove_action</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'wp_head'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'print_emoji_detection_script'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 絵文字を非表示</span>\n<span class=\"token function\">remove_action</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'admin_print_scripts'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'print_emoji_detection_script'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 絵文字を非表示</span>\n<span class=\"token function\">remove_action</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'wp_print_styles'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'print_emoji_styles'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 絵文字を非表示</span>\n<span class=\"token function\">remove_action</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'admin_print_styles'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'print_emoji_styles'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 絵文字を非表示</span>\n<span class=\"token function\">remove_action</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'wp_head'</span><span class=\"token punctuation\">,</span><span class=\"token single-quoted-string string\">'rest_output_link_wp_head'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">remove_action</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'wp_head'</span><span class=\"token punctuation\">,</span><span class=\"token single-quoted-string string\">'wp_resource_hints'</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// dns-prefetchを非表示</span></code></pre></div>\n<h2 id=\"テーマ内で使うcssとjavascriptファイルを指定する\" style=\"position:relative;\">テーマ内で使うCSSとJavascriptファイルを指定する</h2>\n<p><a href=\"/wordpress-theme-css-js/\">WordPressテーマにCSSとJavascriptを読み込む</a>に詳しく記載しています。</p>\n<h2 id=\"カスタムヘッダー\" style=\"position:relative;\">カスタムヘッダー</h2>\n<p>カスタムヘッダー画像を利用することで、管理画面からタイトル画像を変更できるようになります。</p>\n<p>functions.phpでカスタムヘッダーを有効にする</p>\n<div class=\"gatsby-code-title\">functions.php</div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$custom_header_defaults</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n    <span class=\"token single-quoted-string string\">'default-image'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">get_bloginfo</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'template_url'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token single-quoted-string string\">'/img/wp-titlelogo.jpg'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'width'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ヘッダー画像の横幅</span>\n    <span class=\"token single-quoted-string string\">'height'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ヘッダー画像の縦幅</span>\n    <span class=\"token single-quoted-string string\">'header-text'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//ヘッダー画像上にテキスト表示するかどうか</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">add_theme_support</span><span class=\"token punctuation\">(</span> <span class=\"token single-quoted-string string\">'custom-header'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$custom_header_defaults</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<h3 id=\"テンプレートファイル側でヘッダー画像を表示する\" style=\"position:relative;\">テンプレートファイル側でヘッダー画像を表示する</h3>\n<div class=\"gatsby-code-title\">functions.php</div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token function\">get_header_image</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token delimiter important\">?></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">header_image</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">get_custom_header</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">height</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">get_custom_header</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">width</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">endif</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span></code></pre></div>\n<h2 id=\"ナビゲーションメニュー\" style=\"position:relative;\">ナビゲーションメニュー</h2>\n<div class=\"gatsby-code-title\">functions.php</div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">functions<span class=\"token punctuation\">.</span>phpで使うメニューを登録する\n<span class=\"token function\">register_nav_menus</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token single-quoted-string string\">'global'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'グローバルナビゲーション'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// メニュー名</span>\n        <span class=\"token single-quoted-string string\">'footer_menu'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'フッターメニュー'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// メニュー名</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ここで指定されたメニュー名が、メニューの位置として指定できます。</p>\n<p>管理画面から「外観」＞「メニュー」でメニューを設定することができます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB7lCMFz//xAAXEAEBAQEAAAAAAAAAAAAAAAABEBEh/9oACAEBAAEFAp2q7//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAABICH/2gAIAQEABj8Cl6f/xAAaEAACAgMAAAAAAAAAAAAAAAAAEQExEFFh/9oACAEBAAE/IUhC4JxY17P/2gAMAwEAAgADAAAAEPMf/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8QV//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/EEf/xAAaEAEBAQEAAwAAAAAAAAAAAAABEQAhQVHR/9oACAEBAAE/EAikuD7zZjPjj93ATXCLiSFc5v/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"グローバルメニュー\"\n        title=\"グローバルメニュー\"\n        src=\"/static/d113d3e3fd8ad4a631fd2d12b2c57496/4b190/ss-global-menu.jpg\"\n        srcset=\"/static/d113d3e3fd8ad4a631fd2d12b2c57496/e07e9/ss-global-menu.jpg 200w,\n/static/d113d3e3fd8ad4a631fd2d12b2c57496/066f9/ss-global-menu.jpg 400w,\n/static/d113d3e3fd8ad4a631fd2d12b2c57496/4b190/ss-global-menu.jpg 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>続いて、テンプレートファイルにメニューを表示するコードを書きます。</p>\n<p>メニューを表示させる場所(テンプレートファイル)に以下のコードを書きます。\nだいたいheader.phpに書かれることが多いです。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">has_nav_menu</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'global'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token delimiter important\">?></span></span> // メニューがあるときに表示\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">wp_nav_menu</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n        <span class=\"token single-quoted-string string\">'theme_location'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'global'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// register_nav_menuで設定したメニュー名</span>\n        <span class=\"token single-quoted-string string\">'container'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span><span class=\"token single-quoted-string string\">'nav'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ①ナビゲーションを囲むタグ</span>\n        <span class=\"token single-quoted-string string\">'container_id'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span><span class=\"token single-quoted-string string\">'global-menu'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ②ナビゲーションを囲むタグに入るid</span>\n        <span class=\"token single-quoted-string string\">'container_class'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span><span class=\"token single-quoted-string string\">'menu-container'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ③ナビゲーションを囲むタグに入るclass</span>\n        <span class=\"token single-quoted-string string\">'menu_id'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'menu-id'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ④ulタグに入るid</span>\n        <span class=\"token single-quoted-string string\">'menu_class'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'nav-menu'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ⑤ulタグに入るclass</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token delimiter important\">?></span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">endif</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>上のコードで指定した①〜⑤に基づいて、このようにHTMLが出力されます。</p>\n<div class=\"gatsby-highlight\" data-language=\"markup\"><pre class=\"language-markup\"><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>①</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>②<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>③<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>④<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>⑤<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>menu-item-XX<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>TOP<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>①</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"ウィジットエリア\" style=\"position:relative;\">ウィジットエリア</h2>\n<p>ウィジットエリアをテーマに追加することで、投稿一覧や検索、カテゴリー一覧など、便利な部品を表示することができるようになります。</p>\n<p><img src=\"/wordpress-widget-area/\" alt=\"ウィジットエリアの追加方法\"></p>\n<h2 id=\"サムネイルを有効にする\" style=\"position:relative;\">サムネイルを有効にする</h2>\n<div class=\"gatsby-code-title\">functions.php</div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token function\">add_theme_support</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'post-thumbnails'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">add_image_size</span><span class=\"token punctuation\">(</span> <span class=\"token single-quoted-string string\">'thumbnail'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">280</span><span class=\"token punctuation\">,</span> <span class=\"token number\">280</span><span class=\"token punctuation\">,</span> <span class=\"token boolean constant\">true</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>add<em>image</em>size(新しい画像サイズの名前,横幅(px),高さ(px),画像の切り抜き)です。</p>\n<p>画像を表示させるところ（テンプレートファイル）には、このように記載します。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">has_post_thumbnail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token delimiter important\">?></span></span>\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token function\">the_post_thumbnail</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'thumbnail'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">:</span> <span class=\"token delimiter important\">?></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>デフォルト画像のパス<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>280<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>280<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>デフォルト画像<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">endif</span> <span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span></code></pre></div>\n<h2 id=\"抜粋の文字数、文末の表示を変える\" style=\"position:relative;\">抜粋の文字数、文末の表示を変える</h2>\n<div class=\"gatsby-code-title\">functions.php</div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">// 抜粋する文字数を120文字に設定する</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">my_excerpt_length</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$length</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">120</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">add_filter</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'excerpt_length'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'my_excerpt_length'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//概要（抜粋）の文末の文字[…]を削除する</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">my_excerpt_more</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$more</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token single-quoted-string string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">add_filter</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'excerpt_more'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'my_excerpt_more'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"ビジュアルエディタのカスタマイズ\" style=\"position:relative;\">ビジュアルエディタのカスタマイズ</h2>\n<p>ビジュアルエディタ（記事投稿画面）をカスタマイズすることで、ブログの記事を書く時の手間がなくなって楽に♪</p>\n<ul>\n<li><a href=\"/visual-editor-css/\">WordPressのビジュアルエディタによく使うボタンを設定する。</a></li>\n<li><a href=\"/visual-editor-button-customize/\">ビジュアルエディタの見た目を実際の記事に揃える</a></li>\n</ul>\n<p>画像を表示させるところには、このように記載します。</p>","frontmatter":{"title":"functions.phpとは〜WordPressテーマに機能を追加する〜","date":"2018/07/09","updateDate":null,"description":null,"category":"WordPress","tags":["WordPressテーマ自作"],"featured":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAwH/2gAMAwEAAhADEAAAAcWxY5QGX//EABsQAAEEAwAAAAAAAAAAAAAAAAEAAwQhAhEy/9oACAEBAAEFApB0GLaQuPhwv//EABURAQEAAAAAAAAAAAAAAAAAAAIQ/9oACAEDAQE/AXP/xAAWEQADAAAAAAAAAAAAAAAAAAACEDH/2gAIAQIBAT8BKL//xAAZEAEAAgMAAAAAAAAAAAAAAAABABACESH/2gAIAQEABj8C46hWKwr/xAAbEAEAAQUBAAAAAAAAAAAAAAABABARITFhQf/aAAgBAQABPyFbzrjErW7ndAEBQ9OwgBin/9oADAMBAAIAAwAAABDX3//EABYRAAMAAAAAAAAAAAAAAAAAAAEQQf/aAAgBAwEBPxAav//EABYRAQEBAAAAAAAAAAAAAAAAABEBEP/aAAgBAgEBPxCg5//EABoQAQACAwEAAAAAAAAAAAAAAAEAERAhMUH/2gAIAQEAAT8QKAFVYXvcZM2yresexZbAQYJAFcCvcf/Z","aspectRatio":1.7699115044247788,"src":"/static/36d2b1dac608a57c8d7561b4f8aed491/14b42/20180709-icatch.jpg","srcSet":"/static/36d2b1dac608a57c8d7561b4f8aed491/f836f/20180709-icatch.jpg 200w,\n/static/36d2b1dac608a57c8d7561b4f8aed491/2244e/20180709-icatch.jpg 400w,\n/static/36d2b1dac608a57c8d7561b4f8aed491/14b42/20180709-icatch.jpg 800w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},"pageContext":{"slug":"/wordpress-theme-functions/","prev":{"fields":{"slug":"/display-code-on-blog/"},"frontmatter":{"title":"【prism.js】ブログ記事にソースコードをきれいに表示する方法"}},"next":{"fields":{"slug":"/wordpress-searchform/"},"frontmatter":{"title":"WordPressテーマに検索機能をつける"}}}},"staticQueryHashes":["1941199855","3628787746","4032985131"]}